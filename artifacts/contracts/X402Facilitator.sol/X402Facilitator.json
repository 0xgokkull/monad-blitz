{
  "_format": "hh-sol-artifact-1",
  "contractName": "X402Facilitator",
  "sourceName": "contracts/X402Facilitator.sol",
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "snippetId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "AccessGranted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "oldRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "CommissionRateUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "CommissionWithdrawn",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "buyer",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "snippetId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "commission",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "PaymentReceived",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "PAYMENT_AMOUNT",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32[]",
          "name": "snippetIds",
          "type": "bytes32[]"
        }
      ],
      "name": "batchPayForSnippets",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "commissionPool",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "commissionRate",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "emergencyWithdraw",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getBalance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getCommissionPool",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getUserPayments",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "snippetId",
          "type": "bytes32"
        }
      ],
      "name": "hasAccess",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "paidSnippets",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "snippetId",
          "type": "bytes32"
        }
      ],
      "name": "payForSnippet",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "newRate",
          "type": "uint256"
        }
      ],
      "name": "updateCommissionRate",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userPayments",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "userSnippetAccess",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "withdrawCommission",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "bytecode": "0x6080604052600a60015534801561001557600080fd5b50600080546001600160a01b03191633179055610d3e806100376000396000f3fe6080604052600436106101015760003560e01c80637aa74d7611610095578063b56b343711610064578063b56b3437146102a0578063d0c0d8c9146102db578063db2e21bc146102f1578063ddf4acf314610306578063f2fde38b1461033357600080fd5b80637aa74d76146101ff5780637d294e62146102125780638da5cb5b146102325780639d7dadeb1461026a57600080fd5b8063286e5f94116100d1578063286e5f94146101a45780633e25e837146101b95780635ea1d6f8146101ce5780636bc55ab8146101e457600080fd5b8062fa3d501461010d57806312065fe01461012f578063134a20bd146101515780631987abda1461016457600080fd5b3661010857005b600080fd5b34801561011957600080fd5b5061012d610128366004610b37565b610353565b005b34801561013b57600080fd5b50475b6040519081526020015b60405180910390f35b61012d61015f366004610b50565b61042e565b34801561017057600080fd5b5061019461017f366004610b37565b60036020526000908152604090205460ff1681565b6040519015158152602001610148565b3480156101b057600080fd5b5060025461013e565b3480156101c557600080fd5b5061012d61062f565b3480156101da57600080fd5b5061013e60015481565b3480156101f057600080fd5b5061013e662386f26fc1000081565b61012d61020d366004610b37565b610790565b34801561021e57600080fd5b5061019461022d366004610be1565b61095b565b34801561023e57600080fd5b50600054610252906001600160a01b031681565b6040516001600160a01b039091168152602001610148565b34801561027657600080fd5b5061013e610285366004610c0b565b6001600160a01b031660009081526004602052604090205490565b3480156102ac57600080fd5b506101946102bb366004610be1565b600560209081526000928352604080842090915290825290205460ff1681565b3480156102e757600080fd5b5061013e60025481565b3480156102fd57600080fd5b5061012d610989565b34801561031257600080fd5b5061013e610321366004610c0b565b60046020526000908152604090205481565b34801561033f57600080fd5b5061012d61034e366004610c0b565b610aa1565b6000546001600160a01b031633146103865760405162461bcd60e51b815260040161037d90610c2d565b60405180910390fd5b8060328111156103e25760405162461bcd60e51b815260206004820152602160248201527f436f6d6d697373696f6e20726174652063616e6e6f74206578636565642035306044820152602560f81b606482015260840161037d565b60018054908390556040805182815260208101859052428183015290517ffb9289a1ec5e1336ec95ddbae9d53267989e6c7aadd1c8b5e592a4e6eda52eac9181900360600190a1505050565b600061044182662386f26fc10000610c7a565b9050803410156104935760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e74207061796d656e7420666f722062617463680000604482015260640161037d565b6000805b838110156105965760008585838181106104b3576104b3610c91565b336000908152600560209081526040808320938202959095013580835292905292909220549192505060ff166105835760006064600154662386f26fc100006104fc9190610c7a565b6105069190610ca7565b90506105128185610cc9565b33600081815260056020908152604080832087845282528083208054600160ff1991821681179092556003845293829020805490941617909255905142815292965084927f740f94aa8a0b62b43ecf22a25c109ef49e58304a81569654657a00b96c2c513e910160405180910390a3505b508061058e81610cdc565b915050610497565b5080600260008282546105a99190610cc9565b90915550600090506105bb8234610cf5565b336000908152600460205260408120805492935083929091906105df908490610cc9565b909155505060408051348152602081018490524281830152905160009133917f6e9803a538073f53ccfb6ec14dc0996740ae9ab34b75b58f36395928a8e6a8ab9181900360600190a35050505050565b6000546001600160a01b031633146106595760405162461bcd60e51b815260040161037d90610c2d565b600254806106a95760405162461bcd60e51b815260206004820152601960248201527f4e6f20636f6d6d697373696f6e20746f20776974686472617700000000000000604482015260640161037d565b6000600281905580546040516001600160a01b039091169083908381818185875af1925050503d80600081146106fb576040519150601f19603f3d011682016040523d82523d6000602084013e610700565b606091505b50509050806107455760405162461bcd60e51b815260206004820152601160248201527015da5d1a191c985dd85b0819985a5b1959607a1b604482015260640161037d565b600054604080518481524260208201526001600160a01b03909216917fd97d0a78012aae5166e37224fdef0ca58921d520de73745f9ec0d65ba7060c24910160405180910390a25050565b662386f26fc100003410156107de5760405162461bcd60e51b8152602060048201526014602482015273125b9cdd59999a58da595b9d081c185e5b595b9d60621b604482015260640161037d565b33600090815260056020908152604080832084845290915290205460ff161561083d5760405162461bcd60e51b8152602060048201526011602482015270105b1c9958591e481c1d5c98da185cd959607a1b604482015260640161037d565b600060646001543461084f9190610c7a565b6108599190610ca7565b905060006108678234610cf5565b9050816002600082825461087b9190610cc9565b9091555050336000908152600460205260408120805483929061089f908490610cc9565b90915550503360008181526005602090815260408083208784528252808320805460ff19908116600190811790925560038452938290208054909416179092558151348152908101859052428183015290518592917f6e9803a538073f53ccfb6ec14dc0996740ae9ab34b75b58f36395928a8e6a8ab919081900360600190a3604051428152839033907f740f94aa8a0b62b43ecf22a25c109ef49e58304a81569654657a00b96c2c513e9060200160405180910390a3505050565b6001600160a01b038216600090815260056020908152604080832084845290915290205460ff165b92915050565b6000546001600160a01b031633146109b35760405162461bcd60e51b815260040161037d90610c2d565b47806109fa5760405162461bcd60e51b81526020600482015260166024820152754e6f2062616c616e636520746f20776974686472617760501b604482015260640161037d565b600080546040516001600160a01b039091169083908381818185875af1925050503d8060008114610a47576040519150601f19603f3d011682016040523d82523d6000602084013e610a4c565b606091505b5050905080610a9d5760405162461bcd60e51b815260206004820152601b60248201527f456d657267656e6379207769746864726177616c206661696c65640000000000604482015260640161037d565b5050565b6000546001600160a01b03163314610acb5760405162461bcd60e51b815260040161037d90610c2d565b6001600160a01b038116610b155760405162461bcd60e51b815260206004820152601160248201527024b73b30b634b2103732bb9037bbb732b960791b604482015260640161037d565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b600060208284031215610b4957600080fd5b5035919050565b60008060208385031215610b6357600080fd5b823567ffffffffffffffff80821115610b7b57600080fd5b818501915085601f830112610b8f57600080fd5b813581811115610b9e57600080fd5b8660208260051b8501011115610bb357600080fd5b60209290920196919550909350505050565b80356001600160a01b0381168114610bdc57600080fd5b919050565b60008060408385031215610bf457600080fd5b610bfd83610bc5565b946020939093013593505050565b600060208284031215610c1d57600080fd5b610c2682610bc5565b9392505050565b60208082526018908201527f4f6e6c79206f776e65722063616e2063616c6c20746869730000000000000000604082015260600190565b634e487b7160e01b600052601160045260246000fd5b808202811582820484141761098357610983610c64565b634e487b7160e01b600052603260045260246000fd5b600082610cc457634e487b7160e01b600052601260045260246000fd5b500490565b8082018082111561098357610983610c64565b600060018201610cee57610cee610c64565b5060010190565b8181038181111561098357610983610c6456fea2646970667358221220d5c5b16a6dd85e1ec85078ef8d567ef0501305f11f412605f78baaacc7702d8764736f6c63430008140033",
  "deployedBytecode": "0x6080604052600436106101015760003560e01c80637aa74d7611610095578063b56b343711610064578063b56b3437146102a0578063d0c0d8c9146102db578063db2e21bc146102f1578063ddf4acf314610306578063f2fde38b1461033357600080fd5b80637aa74d76146101ff5780637d294e62146102125780638da5cb5b146102325780639d7dadeb1461026a57600080fd5b8063286e5f94116100d1578063286e5f94146101a45780633e25e837146101b95780635ea1d6f8146101ce5780636bc55ab8146101e457600080fd5b8062fa3d501461010d57806312065fe01461012f578063134a20bd146101515780631987abda1461016457600080fd5b3661010857005b600080fd5b34801561011957600080fd5b5061012d610128366004610b37565b610353565b005b34801561013b57600080fd5b50475b6040519081526020015b60405180910390f35b61012d61015f366004610b50565b61042e565b34801561017057600080fd5b5061019461017f366004610b37565b60036020526000908152604090205460ff1681565b6040519015158152602001610148565b3480156101b057600080fd5b5060025461013e565b3480156101c557600080fd5b5061012d61062f565b3480156101da57600080fd5b5061013e60015481565b3480156101f057600080fd5b5061013e662386f26fc1000081565b61012d61020d366004610b37565b610790565b34801561021e57600080fd5b5061019461022d366004610be1565b61095b565b34801561023e57600080fd5b50600054610252906001600160a01b031681565b6040516001600160a01b039091168152602001610148565b34801561027657600080fd5b5061013e610285366004610c0b565b6001600160a01b031660009081526004602052604090205490565b3480156102ac57600080fd5b506101946102bb366004610be1565b600560209081526000928352604080842090915290825290205460ff1681565b3480156102e757600080fd5b5061013e60025481565b3480156102fd57600080fd5b5061012d610989565b34801561031257600080fd5b5061013e610321366004610c0b565b60046020526000908152604090205481565b34801561033f57600080fd5b5061012d61034e366004610c0b565b610aa1565b6000546001600160a01b031633146103865760405162461bcd60e51b815260040161037d90610c2d565b60405180910390fd5b8060328111156103e25760405162461bcd60e51b815260206004820152602160248201527f436f6d6d697373696f6e20726174652063616e6e6f74206578636565642035306044820152602560f81b606482015260840161037d565b60018054908390556040805182815260208101859052428183015290517ffb9289a1ec5e1336ec95ddbae9d53267989e6c7aadd1c8b5e592a4e6eda52eac9181900360600190a1505050565b600061044182662386f26fc10000610c7a565b9050803410156104935760405162461bcd60e51b815260206004820152601e60248201527f496e73756666696369656e74207061796d656e7420666f722062617463680000604482015260640161037d565b6000805b838110156105965760008585838181106104b3576104b3610c91565b336000908152600560209081526040808320938202959095013580835292905292909220549192505060ff166105835760006064600154662386f26fc100006104fc9190610c7a565b6105069190610ca7565b90506105128185610cc9565b33600081815260056020908152604080832087845282528083208054600160ff1991821681179092556003845293829020805490941617909255905142815292965084927f740f94aa8a0b62b43ecf22a25c109ef49e58304a81569654657a00b96c2c513e910160405180910390a3505b508061058e81610cdc565b915050610497565b5080600260008282546105a99190610cc9565b90915550600090506105bb8234610cf5565b336000908152600460205260408120805492935083929091906105df908490610cc9565b909155505060408051348152602081018490524281830152905160009133917f6e9803a538073f53ccfb6ec14dc0996740ae9ab34b75b58f36395928a8e6a8ab9181900360600190a35050505050565b6000546001600160a01b031633146106595760405162461bcd60e51b815260040161037d90610c2d565b600254806106a95760405162461bcd60e51b815260206004820152601960248201527f4e6f20636f6d6d697373696f6e20746f20776974686472617700000000000000604482015260640161037d565b6000600281905580546040516001600160a01b039091169083908381818185875af1925050503d80600081146106fb576040519150601f19603f3d011682016040523d82523d6000602084013e610700565b606091505b50509050806107455760405162461bcd60e51b815260206004820152601160248201527015da5d1a191c985dd85b0819985a5b1959607a1b604482015260640161037d565b600054604080518481524260208201526001600160a01b03909216917fd97d0a78012aae5166e37224fdef0ca58921d520de73745f9ec0d65ba7060c24910160405180910390a25050565b662386f26fc100003410156107de5760405162461bcd60e51b8152602060048201526014602482015273125b9cdd59999a58da595b9d081c185e5b595b9d60621b604482015260640161037d565b33600090815260056020908152604080832084845290915290205460ff161561083d5760405162461bcd60e51b8152602060048201526011602482015270105b1c9958591e481c1d5c98da185cd959607a1b604482015260640161037d565b600060646001543461084f9190610c7a565b6108599190610ca7565b905060006108678234610cf5565b9050816002600082825461087b9190610cc9565b9091555050336000908152600460205260408120805483929061089f908490610cc9565b90915550503360008181526005602090815260408083208784528252808320805460ff19908116600190811790925560038452938290208054909416179092558151348152908101859052428183015290518592917f6e9803a538073f53ccfb6ec14dc0996740ae9ab34b75b58f36395928a8e6a8ab919081900360600190a3604051428152839033907f740f94aa8a0b62b43ecf22a25c109ef49e58304a81569654657a00b96c2c513e9060200160405180910390a3505050565b6001600160a01b038216600090815260056020908152604080832084845290915290205460ff165b92915050565b6000546001600160a01b031633146109b35760405162461bcd60e51b815260040161037d90610c2d565b47806109fa5760405162461bcd60e51b81526020600482015260166024820152754e6f2062616c616e636520746f20776974686472617760501b604482015260640161037d565b600080546040516001600160a01b039091169083908381818185875af1925050503d8060008114610a47576040519150601f19603f3d011682016040523d82523d6000602084013e610a4c565b606091505b5050905080610a9d5760405162461bcd60e51b815260206004820152601b60248201527f456d657267656e6379207769746864726177616c206661696c65640000000000604482015260640161037d565b5050565b6000546001600160a01b03163314610acb5760405162461bcd60e51b815260040161037d90610c2d565b6001600160a01b038116610b155760405162461bcd60e51b815260206004820152601160248201527024b73b30b634b2103732bb9037bbb732b960791b604482015260640161037d565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b600060208284031215610b4957600080fd5b5035919050565b60008060208385031215610b6357600080fd5b823567ffffffffffffffff80821115610b7b57600080fd5b818501915085601f830112610b8f57600080fd5b813581811115610b9e57600080fd5b8660208260051b8501011115610bb357600080fd5b60209290920196919550909350505050565b80356001600160a01b0381168114610bdc57600080fd5b919050565b60008060408385031215610bf457600080fd5b610bfd83610bc5565b946020939093013593505050565b600060208284031215610c1d57600080fd5b610c2682610bc5565b9392505050565b60208082526018908201527f4f6e6c79206f776e65722063616e2063616c6c20746869730000000000000000604082015260600190565b634e487b7160e01b600052601160045260246000fd5b808202811582820484141761098357610983610c64565b634e487b7160e01b600052603260045260246000fd5b600082610cc457634e487b7160e01b600052601260045260246000fd5b500490565b8082018082111561098357610983610c64565b600060018201610cee57610cee610c64565b5060010190565b8181038181111561098357610983610c6456fea2646970667358221220d5c5b16a6dd85e1ec85078ef8d567ef0501305f11f412605f78baaacc7702d8764736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
